function ScaleButton_FnDecoration(){return function(t,e,i){return}}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n["throw"](t))}catch(e){o(e)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(a,s)}c((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__decorate=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,a=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(3>o?r(a):o>3?r(e,i,a):r(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},BaseView=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i.isCanCloseByTopBanner=!1,i.hasUICompleteCache=!1,i.isCanCloseByTopBanner=e,i.addEventListener(eui.UIEvent.COMPLETE,i.onUIComplete,i),i}return __extends(e,t),e.prototype.onUIComplete=function(){this.mMediator&&this.mMediator.onViewUIComplete?this.mMediator.onViewUIComplete():this.hasUICompleteCache=!0},e.prototype.setBelongMediator=function(t){this.mMediator=t},e.prototype.getMediator=function(){return this.mMediator},e}(eui.Component);__reflect(BaseView.prototype,"BaseView");var IMediator=function(){function t(){}return t}();__reflect(IMediator.prototype,"IMediator");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),AppFacade.getInstance(this),AppFacade.getInstance().sendCommand(CMD_StartUp.NAME),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),this.removeLaunchImg(),t=new LoadingUI(this.stage),this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n;n=new eui.Theme(null,t.stage),n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.removeLaunchImg=function(){try{var t=document.body.getElementsByClassName("launch")[0];t&&t.remove()}catch(e){console.log(e)}},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(c,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AppFacade=function(){function t(t){this.mModelDic={},this.mCommandDic={},this.mMediatorDic={},this.mNotifyDic={},this.initApp(t)}return t.getInstance=function(e){return void 0===e&&(e=null),t.sAppInstance||(t.sAppInstance=new t(e)),t.sAppInstance},t.prototype.registModel=function(t){this.mModelDic[t.NAME]=t.getInstance()},t.prototype.initApp=function(t){this.registerMediator(LayerMediator,t),this.registerMediator(MessageMediator,null),this.registerSimpleCommand(CMD_StartUp)},t.prototype.registerSimpleCommand=function(t){this.mCommandDic[t.NAME]=new t},t.prototype.registerMediator=function(t,e){var i=new t(e);this.mMediatorDic[t.NAME]=i,i.onRegister()},t.prototype.retriveMediator=function(t){return this.mMediatorDic[t]},t.prototype.registerNotifications=function(t,e){var i=this;e.forEach(function(e){t[e].that=t,i.mNotifyDic[e]=t[e]})},t.prototype.sendNotification=function(t,e){this.mNotifyDic[t]&&this.mNotifyDic[t].call(this.mNotifyDic[t].that,e)},t.prototype.sendCommand=function(t,e){void 0===e&&(e=null);var i=this.mCommandDic[t];i&&i.execute(e)},t.prototype.remove=function(){},t}();__reflect(AppFacade.prototype,"AppFacade");var CMD_StartUp=function(){function t(){}return t.prototype.execute=function(t){AppFacade.getInstance().registerMediator(LobbySelectMediator,LobbySelectScene)},t.NAME="CMD_StartUp",t}();__reflect(CMD_StartUp.prototype,"CMD_StartUp");var TopBanner=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.display4ScaleArr=[this.btnBack],this.initListener()},e.prototype.initListener=function(){this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},e.prototype.onBack=function(){this.removeScene(this)},e.prototype.removeScene=function(t){var e=t.parent.parent,i=t.parent;i&&e&&(i.isCanCloseByTopBanner?e.removeChild(i):this.removeScene(i))},__decorate([ScaleButton_FnDecoration()],e.prototype,"childrenCreated",null),e}(eui.Component);__reflect(TopBanner.prototype,"TopBanner");var EGameKindID;!function(t){t[t.INSTANT_MEMORY=801]="INSTANT_MEMORY",t[t.REACT_RATE=802]="REACT_RATE"}(EGameKindID||(EGameKindID={}));var LoadingUI=function(t){function e(e){var i=t.call(this)||this;return i.mStage=e,i.width=i.mStage.stageWidth,i.height=i.mStage.stageHeight,i.mWidth=i.mStage.stageWidth,i.createView(),i}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center",this.textField.verticalAlign="middle";var t=new egret.Sprite;t.width=this.mWidth,t.height=120;var e=new eui.Rect;e.width=this.mWidth,e.height=120,this.mProgressRect=new eui.Rect,this.mProgressRect.height=120,this.mProgressRect.fillColor=65280,t.addChild(e),t.addChild(this.mProgressRect),t.addChild(this.textField),this.textField.x=(t.width-this.textField.width)/2,this.textField.y=(t.height-this.textField.height)/2,t.y=0,t.x=(this.mWidth-t.width)/2,this.addChild(t)},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e;var i=t/e;this.mProgressRect.width=i*this.mWidth},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var ISimpleCommand=function(){function t(){}return t}();__reflect(ISimpleCommand.prototype,"ISimpleCommand");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LayerMediator=function(){function t(t){this.mMainLayer=t,this.mStage=this.mMainLayer.stage}return Object.defineProperty(t.prototype,"view",{get:function(){return this.mMainLayer},enumerable:!0,configurable:!0}),t.prototype.registerNotifications=function(){},t.prototype.onRegister=function(){this.initLayer()},t.prototype.initLayer=function(){if(!this.mLayerDic){this.mLayerDic={},this.mLayerDic[ELayer.MAIN]=this.mMainLayer;var t=new eui.UILayer;t.name="top",t.touchThrough=!0,t.touchEnabled=!1,this.mLayerDic[ELayer.TOP]=t,this.mStage.addChild(t)}},t.prototype.getLayer=function(t){return this.mLayerDic[t]},t.prototype.addScene=function(t){this.mMainLayer.addChild(t),t.x=(this.mMainLayer.width-t.width)/2,t.y=(this.mMainLayer.height-t.height)/2},t.NAME="LayerMediator",t}();__reflect(LayerMediator.prototype,"LayerMediator");var ELayer;!function(t){t[t.MAIN=0]="MAIN",t[t.TOP=1]="TOP"}(ELayer||(ELayer={}));var MessageMediator=function(){function t(){}return t.prototype.view=function(){},t.prototype.onRegister=function(){},t.prototype.registerNotifications=function(){},t.prototype.showFloatTip=function(t,e){var i=this;if(void 0===e&&(e=16777215),!this.mLabelFloat){this.mLabelFloat=new eui.Label,this.mLabelFloat.size=60;var n=AppFacade.getInstance().retriveMediator(LayerMediator.NAME).getLayer(ELayer.TOP);n.addChild(this.mLabelFloat),this.mLabelFloat.visible=!1,this.mLabelFloat.touchEnabled=!1}this.mLabelFloat.text=t,this.mLabelFloat.textColor=e,this.mLabelFloat.y=(this.mLabelFloat.parent.height-this.mLabelFloat.height)/2,this.mLabelFloat.x=(this.mLabelFloat.parent.width-this.mLabelFloat.width)/2;var r=this.mLabelFloat.y,o=this.mLabelFloat.y-50;egret.Tween.get(this.mLabelFloat).to({visible:!0}).to({y:o},500).call(function(){i.mLabelFloat.y=r,i.mLabelFloat.visible=!1})},t.NAME="MessageMediator",t}();__reflect(MessageMediator.prototype,"MessageMediator");var LobbySelectMediator=function(){function t(t){this.registerNotifications(),this.mView=new t,this.mView.setBelongMediator&&this.mView.setBelongMediator(this)}return Object.defineProperty(t.prototype,"view",{get:function(){return this.mView},enumerable:!0,configurable:!0}),t.prototype.registerNotifications=function(){},t.prototype.onViewUIComplete=function(){var t=AppFacade.getInstance().retriveMediator(LayerMediator.NAME);t.addScene(this.view),this.initView()},t.prototype.initView=function(){var t=this;this.view.listEntry.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEntryListTap,this),this.view.btnCopy.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Utils.copyToBoard(t.view.labelUrl.text),AppFacade.getInstance().retriveMediator(MessageMediator.NAME).showFloatTip("复制成功")},this),this.getCfg()},t.prototype.getCfg=function(){var t=RES.getRes("lobbyEntryCfg_json");this.view.listEntry.dataProvider=new eui.ArrayCollection(t)},t.prototype.onRegister=function(){this.view.hasUICompleteCache&&this.onViewUIComplete()},t.prototype.onEntryListTap=function(t){var e=t.item;e.kindID==EGameKindID.INSTANT_MEMORY?AppFacade.getInstance().registerMediator(OrderBoxMediator,OrderBoxScene):e.kindID==EGameKindID.REACT_RATE&&AppFacade.getInstance().registerMediator(ReactionRateMediator,ReactionRateScene)},t.NAME="LobbySelectMediator",t}();__reflect(LobbySelectMediator.prototype,"LobbySelectMediator");var LobbySelectScene=function(t){function e(){var e=t.call(this)||this;return e.skinName="LobbySelectSceneSkin",e.listEntry.itemRenderer=LobbyEntryItemView,e}return __extends(e,t),e}(BaseView);__reflect(LobbySelectScene.prototype,"LobbySelectScene");var LobbyEntryItemView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.display4ScaleArr=[this.group4Click],egret.log("[LobbyEntryItemView:childrenCreate]")},__decorate([ScaleButton_FnDecoration()],e.prototype,"childrenCreated",null),e}(eui.ItemRenderer);__reflect(LobbyEntryItemView.prototype,"LobbyEntryItemView");var OrderBoxMediator=function(){function t(t){this.mItems2Show=[],this.mClickStep=0,this.errorTime=0,this.mToalStepCount=0,this.mStepData={},this.mItemLen=15,this.registerNotifications(),this.mView=new t,this.mView.setBelongMediator&&this.mView.setBelongMediator(this),this.mFloatMessageMrg=AppFacade.getInstance().retriveMediator(MessageMediator.NAME),this.view.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)}return Object.defineProperty(t.prototype,"view",{get:function(){return this.mView},enumerable:!0,configurable:!0}),t.prototype.registerNotifications=function(){AppFacade.getInstance().registerNotifications(this,[])},t.prototype.onViewUIComplete=function(){this.mHasRemove=!1;var t=AppFacade.getInstance().retriveMediator(LayerMediator.NAME);t.addScene(this.view),this.initView()},t.prototype.initView=function(){this.view.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStart,this),this.view.btnAgain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgain,this),this.view.btnAgainInGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgain,this),this.view.groupMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMask,this),this.view.groupMain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListItemTap,this),this.recoverViewWhenGameStart()},t.prototype.onStart=function(){this.view.btnStart.visible=!1,this.view.btnAgain.visible=!1,this.view.btnAgainInGame.visible=!1,this.view.groupMask.visible=!0,this.view.txtInstruct.visible=!1,this.refreshData(),this.showAni()},t.prototype.onAgain=function(){this.resetData(),this.onStart()},t.prototype.showAni=function(){this.itemAni()},t.prototype.refreshData=function(){this.getNewData();for(var t in this.mStepData){var e=this.view.groupMain.getChildAt(this.mStepData[t]);this.mItems2Show.push(e)}},t.prototype.itemAni=function(){if(!this.mHasRemove){var t=this.mItems2Show.shift();return t?void t.playAni(this.itemAni,this):(this.view.groupMask.visible=!1,void this.mFloatMessageMrg.showFloatTip("开始吧",255))}},t.prototype.recoverViewWhenGameEnd=function(){this.view.txtInstruct.visible=!1,this.view.btnAgainInGame.visible=!1,this.view.btnAgain.visible=!0,this.resetData(),this.refreshData()},t.prototype.resetData=function(){this.mClickStep=0,this.mItems2Show.length=0,this.errorTime=0},t.prototype.recoverViewWhenGameStart=function(){this.view.txtInstruct.visible=!0,this.view.btnStart.visible=!0,this.view.btnAgainInGame.visible=!1,this.view.btnAgain.visible=!1,this.view.groupMask.visible=!0,this.resetData()},t.prototype.onListItemTap=function(t){var e=this.view.groupMain.getChildIndex(t.target.parent);return this.mStepData[this.mClickStep]!==e?void this.showFloat(EnumOrderBoxStatus.WRONG):this.mToalStepCount===this.mClickStep+1?(this.mFloatMessageMrg.showFloatTip("恭喜过关",65280),void this.recoverViewWhenGameEnd()):(this.showFloat(EnumOrderBoxStatus.CORRECT),void this.mClickStep++)},t.prototype.showFloat=function(t){t===EnumOrderBoxStatus.CORRECT?this.mFloatMessageMrg.showFloatTip("不错哟",65280):(++this.errorTime>6&&(this.view.btnAgainInGame.visible=!0),this.mFloatMessageMrg.showFloatTip("再试试",16711680))},t.prototype.getNewData=function(){var t=this;this.mStepData={};for(var e=[],i=[],n=0;n<this.mItemLen;++n){var r=Math.floor(2*Math.random()),o=0==r?EnumOrderBoxStatus.WRONG:EnumOrderBoxStatus.CORRECT;o===EnumOrderBoxStatus.CORRECT&&i.push(n);var a={stat:o,skinIdx:n,showIdx:0};e.push(a)}return this.mToalStepCount=i.length,i.sort(function(t,e){return Math.random()-.5}),i.forEach(function(e,i){t.mStepData[i]=e}),e.forEach(function(t,n){t.stat===EnumOrderBoxStatus.CORRECT&&(e[n].showIdx=i.indexOf(t.skinIdx))}),e},t.prototype.onMask=function(){},t.prototype.onRegister=function(){this.view.hasUICompleteCache&&this.onViewUIComplete()},t.prototype.onRemove=function(){this.mHasRemove=!0},t.NAME="OrderBoxIMediator",t}();__reflect(OrderBoxMediator.prototype,"OrderBoxMediator");var OrderBoxScene=function(t){function e(){var e=t.call(this,!0)||this;return e.skinName="OrderBoxSceneSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.initListener(),this.groupMain.removeChildren();for(var e=0;15>e;e++){var i=new OrderBoxItemRenderer;this.groupMain.addChild(i)}},e.prototype.initListener=function(){this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},e.prototype.onBack=function(){this.removeScene(this)},e.prototype.removeScene=function(t){t&&t.parent&&t.parent.removeChild(t)},e}(BaseView);__reflect(OrderBoxScene.prototype,"OrderBoxScene");var OrderBoxItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.skinName="OrderBoxItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTapBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTapEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTapEnd,this)},e.prototype.playAni=function(t,e){egret.log("playAni"),egret.Tween.get(this.txtGreen).to({visible:!0}).to({scaleX:1.2,scaleY:1.2},800).to({scaleX:1,scaleY:1,alpha:0},800).to({alpha:1,visible:!1}).call(t,e)},e.prototype.onTapBegin=function(){this.imgBg.fillColor=1446161},e.prototype.onTapEnd=function(){this.imgBg.fillColor=11908019},e.prototype.setViewStatus=function(t){this.txtGreen.visible=t===EnumOrderBoxStatus.CORRECT,this.txtRed.visible=t===EnumOrderBoxStatus.WRONG},e}(eui.Component);__reflect(OrderBoxItemRenderer.prototype,"OrderBoxItemRenderer");var EnumOrderBoxStatus;!function(t){t[t.CORRECT=0]="CORRECT",t[t.WRONG=1]="WRONG"}(EnumOrderBoxStatus||(EnumOrderBoxStatus={}));var ReactionRateMediator=function(){function t(t){this.mCenterNumberDataProvider=new eui.ArrayCollection,this.mCenterNumData=[],this.mRotateSwitch=!1,this.mRotateTimerDur=17,this.mRotateTimer=new egret.Timer(this.mRotateTimerDur),this.mPointerRotateAngle=0,this.mCurStep=0,this.mSectionCenterAngleDic={},this.registerNotifications(),this.mView=new t,this.mView.setBelongMediator&&this.mView.setBelongMediator(this)}return Object.defineProperty(t.prototype,"view",{get:function(){return this.mView},enumerable:!0,configurable:!0}),t.prototype.registerNotifications=function(){AppFacade.getInstance().registerNotifications(this,[])},t.prototype.onViewUIComplete=function(){var t=AppFacade.getInstance().retriveMediator(LayerMediator.NAME);t.addScene(this.view),this.initView()},t.prototype.initView=function(){this.view.btnSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSwitch,this),this.view.btnRestart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgain,this),this.refreshCenterNumber(),this.initRotateTimer(),this.generateLockPanel(),this.view.listSecret.dataProvider=this.mCenterNumberDataProvider},t.prototype.refreshCenterNumber=function(){this.mCenterNumData.length=0;for(var t=[],e=5,i=0;e>i;i++){var n=void 0;n={num:this.getRandomNum(this.mCenterNumData),color:16711680},this.mCenterNumData.push(n.num),t.push(n)}this.mCenterNumberDataProvider.source=t},t.prototype.getRandomNum=function(t){var e=Math.floor(10*Math.random());return t[t.length-1]===e?this.getRandomNum(t):e},t.prototype.getPointerArc=function(t){return this.mPointerArc=2*t,this.mPointerArc},t.prototype.generatePointerObj=function(){this.mPointer||(this.mPointer={});var t=this.generateSectionContainer(),e=this.generateSectionArc({sectionWidth:this.mInitialParamOfSection.sectionWidth,radius:this.mInitialParamOfSection.radius,angle2ArcUnit:this.mInitialParamOfSection.angle2ArcUnit,sectionArc:this.getPointerArc(this.mInitialParamOfSection.sectionArc)},15713634);return t.addChild(e),this.mPointer.arc=this.mInitialParamOfSection.sectionArc,this.mPointer.container=t,this.mPointer.shape=e,t.alpha=.6,this.setPointerToNewPos(),t},t.prototype.generateMarkArcObj=function(){return this.mMarkArcObj=this.generateSectionContainer(),this.mMarkArcObj.alpha=.5,this.mMarkArcObj.addChild(this.generateSectionArc(this.mInitialParamOfSection,16711680)),this.mMarkArcObj},t.prototype.generateBaseData=function(t){return this.mBaseData||(this.mBaseData={}),this.mBaseData.diameter=t,this.mBaseData.radius=t/2,this.mBaseData.angle2ArcUnit=Math.PI/180,this.mBaseData.arc2angleUnit=180/Math.PI,this.mBaseData.sectionWidth=192,this.mBaseData},t.prototype.generateLockPanel=function(t,e){void 0===t&&(t=this.view.sectionCount),void 0===e&&(e=618);var i=this.generateBaseData(e),n=t,r=360*i.angle2ArcUnit/n,o=new egret.Shape,a=o.graphics;a.beginFill(16711680),a.drawCircle(i.radius,i.radius,i.radius),a.endFill();var s=this.view.groupLock;s.addChild(o);var c=new egret.Shape,h=c.graphics;h.beginFill(3156522),h.drawCircle(i.radius,i.radius,156),h.endFill(),s.addChild(c);var l=new egret.DisplayObjectContainer;l.width=i.diameter,l.height=i.diameter,s.addChildAt(l,1);for(var u=0;10>u;u++){var p=this.generateSectionContainer();this.mInitialParamOfSection||(this.mInitialParamOfSection={sectionWidth:i.sectionWidth,radius:i.radius,angle2ArcUnit:i.angle2ArcUnit,sectionArc:r});var d=this.generateSectionArc(this.mInitialParamOfSection);p.addChild(d);var m=new eui.Label(u+"");m.size=70+m.height/2,m.x=(i.sectionWidth-m.width)/2+m.width/2,m.y=78,p.addChild(m),p.rotation=u*r*i.arc2angleUnit,m.anchorOffsetX=m.width/2,m.anchorOffsetY=m.height/2,m.rotation=-u*r*i.arc2angleUnit,l.addChild(p),l.cacheAsBitmap=!0}s.addChildAt(this.generatePointerObj(),2),s.addChildAt(this.generateMarkArcObj(),2),this.initResultCheckDic(n),this.setMarkArcObjPos()},t.prototype.generateSectionArc=function(t,e){if(void 0===e&&(e=5323526),t){var i=new egret.Shape,n=i.graphics;return n.beginFill(e),n.moveTo(t.sectionWidth/2,t.radius),n.lineTo(t.sectionWidth/2,0),n.drawArc(t.sectionWidth/2,t.radius,t.radius,90*-t.angle2ArcUnit-t.sectionArc/2,90*-t.angle2ArcUnit+t.sectionArc/2),n.lineTo(t.sectionWidth/2,t.radius),n.endFill(),i}},t.prototype.generateSectionContainer=function(){var t=this.mBaseData,e=new egret.DisplayObjectContainer;return e.width=t.sectionWidth,e.height=t.radius,e.x=(t.diameter-t.sectionWidth)/2+t.sectionWidth/2,e.y=t.radius,e.anchorOffsetX=t.sectionWidth/2,e.anchorOffsetY=t.radius,e},t.prototype.initRotateTimer=function(){this.mRotateTimer.addEventListener(egret.TimerEvent.TIMER,this.onRotateTimer,this)},t.prototype.onRotateTimer=function(){var t=this.mPointer.container.rotation;t=0>t?this.mPointer.container.rotation+360:t,this.mPointerRotateAngle=(t+10)%360,this.mPointer.container.rotation=this.mPointerRotateAngle},t.prototype.onStart=function(){this.mRotateTimer.start()},t.prototype.onPause=function(){if(this.mRotateTimer.stop(),this.checkIsInCorrectPos()){4===this.mCurStep&&this.view.setLabelStatus(!0);var t=this.mCenterNumberDataProvider.source[this.mCurStep];t.color=65280,this.mCenterNumberDataProvider.itemUpdated(t),this.mCurStep++,this.setMarkArcObjPos()}},t.prototype.checkIsInCorrectPos=function(){var t=this,e=this.getCurTarIdx(),i=this.mSectionCenterAngleDic[e],n=function(){var e,n;if(0===i&&t.mPointerRotateAngle){var r=360-t.mPointerRotateAngle;t.mPointerRotateAngle=Math.min(r,t.mPointerRotateAngle)}return e=t.mPointerRotateAngle-i,n=Math.abs(e),n<=(t.mPointerArc-t.mInitialParamOfSection.sectionArc)/2*t.mBaseData.arc2angleUnit}();return n},t.prototype.initResultCheckDic=function(t){for(var e=this.mInitialParamOfSection,i=e.sectionArc*this.mBaseData.arc2angleUnit,n=0;t>n;n++)this.mSectionCenterAngleDic[n]=n*i},t.prototype.onAgain=function(){this.recoverView()},t.prototype.onSwitch=function(){var t=this.view.onSwitch();0===t?this.onPause():1===t&&this.onStart()},t.prototype.setPointerToNewPos=function(){this.mPointer.container.rotation=Math.floor(360*Math.random())},t.prototype.setMarkArcObjPos=function(){var t=this.getCurTarIdx();if(null==t)return void(this.mMarkArcObj.visible=!1);this.mMarkArcObj.visible=!0;var e=this.mSectionCenterAngleDic[t];this.mMarkArcObj.rotation=e},t.prototype.getCurTarIdx=function(){return this.mCenterNumData[this.mCurStep]},t.prototype.recoverView=function(){this.mRotateTimer.reset(),this.refreshCenterNumber(),this.mCurStep=0,this.view.setLabelStatus(!1),this.setPointerToNewPos(),this.setMarkArcObjPos(),this.view.resumeSwitchBtn()},t.prototype.onRegister=function(){this.view.hasUICompleteCache&&this.onViewUIComplete()},t.NAME="ReactionRateMediator",t}();__reflect(ReactionRateMediator.prototype,"ReactionRateMediator");var ReactionRateScene=function(t){function e(){var e=t.call(this,!0)||this;return e.skinName="ReactionRateSceneSkin",e.sectionCount=10,e.mSwitchBtnStatus=0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.resumeSwitchBtn(),this.display4ScaleArr=[this.btnSwitch,this.btnRestart],this.initListener()},e.prototype.onSwitch=function(){return 0===this.mSwitchBtnStatus?(this.btnSwitch.label="暂停",this.mSwitchBtnStatus=1):1===this.mSwitchBtnStatus&&this.resumeSwitchBtn(),this.mSwitchBtnStatus},e.prototype.resumeSwitchBtn=function(){this.btnSwitch.label="开始",this.mSwitchBtnStatus=0},e.prototype.setLabelStatus=function(t){t?(this.labelLockStatus.text="解锁成功",this.labelLockStatus.textColor=65280):(this.labelLockStatus.text="锁定中",this.labelLockStatus.textColor=16711680)},e.prototype.initListener=function(){this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},e.prototype.onBack=function(){this.removeScene(this)},e.prototype.removeScene=function(t){t&&t.parent&&t.parent.removeChild(t)},__decorate([ScaleButton_FnDecoration()],e.prototype,"childrenCreated",null),e}(BaseView);__reflect(ReactionRateScene.prototype,"ReactionRateScene");var Utils=function(){function t(){}return t.copyToBoard=function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e)},t}();__reflect(Utils.prototype,"Utils");